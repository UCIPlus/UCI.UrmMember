# 项目进展

## 开发阶段总览

### 第一阶段：基础架构搭建 ✅ 100%

**目标**：建立项目基础，配置开发环境

#### 已完成

- ✅ 项目初始化（基于 Wot Starter 脚手架）
- ✅ Git 仓库配置和首次提交
- ✅ 开发环境配置（Node.js、pnpm）
- ✅ 基础目录结构建立
- ✅ 示例页面创建（首页、关于）
- ✅ 依赖包安装和配置
- ✅ ESLint 和代码规范配置
- ✅ Memory Bank 完整建立
  - ✅ 核心文档（projectbrief、productContext、systemPatterns、techContext、activeContext、progress）
  - ✅ README 使用指南
  - ✅ tasks/ 和 knowledge/ 目录结构
- ✅ 开发规范文档体系（.github/instructions/）
- ✅ Copilot 指令系统（.github/prompts/）
- ✅ 项目信息配置（AppID、应用名称）
- ✅ 清理原模板配置文件
- ✅ **TASK001 创建**：UCI 前端项目复刻任务规划完成
- ✅ **环境配置**（2026-01-08）
  - ✅ 配置开发、测试、生产环境 API 地址
  - ✅ 配置 API 超时时间
- ✅ **Alova 实例配置**（2026-01-08）
  - ✅ 配置 Alova 实例和 uni-app 适配器
  - ✅ 添加 Token 认证支持（Bearer Token）
  - ✅ 配置请求拦截器（自动添加 Token）
  - ✅ 配置响应拦截器（统一错误处理）
  - ✅ 实现业务状态码处理（200/401/403/500）
  - ✅ 实现 401/403 自动跳转登录页
- ✅ **API 类型定义**（2026-01-08）
  - ✅ 创建 `src/api/core/types.ts`（通用类型定义）
  - ✅ 定义后端响应结构（ApiResponse、PaginationResponse）
  - ✅ 定义认证相关类型（WechatLoginParams、WechatLoginData）
  - ✅ 定义用户相关类型（UserInfo、UserAsset）
- ✅ **API 模块定义**（2026-01-08）
  - ✅ 创建 `src/api/modules/auth.ts`（认证模块 API）
  - ✅ 创建 `src/api/modules/user.ts`（用户模块 API）
  - ✅ 定义微信小程序/公众号登录 API
  - ✅ 定义用户信息管理 API
- ✅ **技术决策更新**（2026-01-08）
  - ✅ 确认使用 Token 认证（非 JWT）
  - ✅ Token 存储在 Redis，30天有效期
  - ✅ Token 格式：md5("{$storeId}_{$timeStamp}_{$userId}_{$guid}_{$salt}")
  - ✅ 后端 API 使用 `/miniapp/` 路径

#### 下一步

- ⏳ **计划调整**：暂缓认证系统开发，优先实现无需认证的页面
- ⏳ 优先开发站点查询模块（地图、列表、详情）
- ⏳ 优先开发营销活动模块（列表、详情、扫码领券）
- ⏳ 优先开发通用页面（帮助、关于、协议）
- ⏳ 待认证测试环境就绪后，继续 TASK001 阶段 1.4：认证系统页面和组件开发

### 第二阶段：核心功能迁移 ⏳ 0%

**目标**：迁移原系统的核心用户功能（对应 TASK001）

#### 核心功能待开发

##### 2.1 用户认证 ⏳

- ⏳ 微信小程序登录
- ⏳ 支付宝小程序登录
- ⏳ H5 登录（如需要）
- ⏳ Token 管理（存储、刷新）
- ⏳ 路由守卫（登录拦截）

##### 2.2 个人中心 ⏳

- ⏳ 个人中心首页
- ⏳ 用户信息展示（昵称、头像、会员状态）
- ⏳ 资产统计（券数量、余额）
- ⏳ 功能菜单导航

##### 2.3 优惠券管理 ⏳

- ⏳ 自助洗车券列表
- ⏳ 自动洗车券列表
- ⏳ 核销券列表
- ⏳ 优惠券详情页
- ⏳ 优惠券使用记录

##### 2.4 组合购券充值 ⏳

- ⏳ 套餐列表展示
- ⏳ 套餐详情页
- ⏳ 购买流程（选择 → 确认 → 支付）
- ⏳ 订单管理
- ⏳ 支付集成（微信支付、支付宝支付、余额支付）

##### 2.5 消费记录 ⏳

- ⏳ 自助洗车记录列表
- ⏳ 自动洗车记录列表
- ⏳ 消费记录详情
- ⏳ 按时间筛选

##### 2.6 推荐返佣 ⏳

- ⏳ 推荐首页（统计数据展示）
- ⏳ 推荐链接/二维码生成
- ⏳ 推荐记录列表
- ⏳ 佣金提现申请
- ⏳ 提现记录查询

### 第三阶段：扩展功能 ⏳ 0%

**目标**：迁移低频但重要的功能

#### 扩展功能待开发

##### 3.1 设备扫码 ⏳

- ⏳ 扫码功能（调用原生 API）
- ⏳ 设备信息展示
- ⏳ 选择支付方式
- ⏳ 启动服务

##### 3.2 站点查询 ⏳

- ⏳ 地图展示（集成腾讯地图或高德地图）
- ⏳ 站点列表
- ⏳ 站点详情
- ⏳ 导航功能
- ⏳ 设备状态实时展示

##### 3.3 营销活动 ⏳

- ⏳ 签到领券
- ⏳ 砍价活动
- ⏳ 秒杀活动
- ⏳ 分享领券
- ⏳ 消费满赠

##### 3.4 其他功能 ⏳

- ⏳ 服务协议页面
- ⏳ 隐私政策页面
- ⏳ 关于我们页面
- ⏳ 帮助中心
- ⏳ 意见反馈

### 第四阶段：测试与优化 ⏳ 0%

**目标**：确保质量，优化性能

#### 待完成任务

##### 4.1 功能测试 ⏳

- ⏳ 单元测试编写
- ⏳ 集成测试
- ⏳ E2E 测试
- ⏳ 多端兼容性测试

##### 4.2 性能优化 ⏳

- ⏳ 页面加载速度优化
- ⏳ 图片资源优化
- ⏳ 代码分割优化
- ⏳ 请求缓存优化

##### 4.3 用户体验优化 ⏳

- ⏳ 交互流畅度提升
- ⏳ 加载动画和骨架屏
- ⏳ 错误提示优化
- ⏳ 无障碍访问支持

##### 4.4 上线准备 ⏳

- ⏳ 生产环境配置
- ⏳ 小程序审核准备
- ⏳ 用户手册编写
- ⏳ 运营培训

## 已实现的功能

### 基础设施

- ✅ Vite + Vue3 + TypeScript 开发环境
- ✅ Wot UI 组件库集成
- ✅ UnoCSS 原子化 CSS
- ✅ Pinia 状态管理
- ✅ Alova 网络请求库
- ✅ Vue Router 路由管理
- ✅ ESLint 代码规范检查
- ✅ Git Hooks（Husky + Commitlint）

### 示例页面

- ✅ 首页（示例）
- ✅ 关于页面（示例）
- ✅ Tabbar 布局（示例）

## 待实现的功能

### 高优先级（P0 - 必须完成）

1. 用户认证系统
2. 个人中心首页
3. 优惠券列表和详情
4. 组合购券充值
5. 支付功能

### 中优先级（P1 - 重要功能）

1. 消费记录查询
2. 推荐返佣系统
3. 设备扫码启动

### 低优先级（P2 - 可选功能）

1. 站点查询
2. 营销活动
3. 帮助中心
4. 意见反馈

## 已知问题

### 功能问题

（暂无，待开发过程中记录）

### 技术问题

（暂无，待开发过程中记录）

### 性能问题

（暂无，待测试后记录）

## 技术债务

### 当前技术债务

（暂无，待开发过程中记录）

### 需要重构的部分

（暂无，待代码积累后评估）

## 里程碑

### 已完成的里程碑

- ✅ **M1：项目启动和规划**（2026年1月8日）
  - 项目初始化完成
  - Memory Bank 完整建立
  - 开发规范文档体系建立
  - TASK001 创建：UCI 前端复刻任务规划完成
  - Copilot 指令系统配置
  - 开发环境就绪
  - 项目信息配置完成

### 计划中的里程碑

- ⏳ **M2：API 对接完成**（TASK001 第一阶段，预计 3-5 天）
  - Alova 实例配置完成
  - 认证流程实现
  - 基础 API 调用测试通过
  - 个人中心首页完成

- ⏳ **M3：核心功能完成**（TASK001 第二~四阶段，预计 15-20 天）
  - 优惠券系统（券包、停车券、核销）
  - 充值购券系统（组合套餐、支付集成）
  - 消费记录查询
  - 推荐返佣系统

- ⏳ **M4：扩展功能完成**（TASK001 第五~六阶段，预计 10-15 天）
  - 日卡功能
  - 营销活动
  - 站点地图
  - 设备扫码
  - 其他辅助功能

- ⏳ **M5：测试完成**（TASK001 第七阶段，预计 5-7 天）
  - 功能测试通过
  - 多端兼容性测试通过
  - 性能指标达标

- ⏳ **M6：上线发布**（TASK001 完成）
  - 微信小程序审核通过
  - 支付宝小程序审核通过
  - H5 部署完成
  - 正式上线

## 任务清单

### 基础架构搭建

- [x] 完成项目初始化
- [x] 完成 Memory Bank 初始化

- [x] 建立开发规范文档体系
- [x] 配置项目信息
- [x] **创建 TASK001：UCI 前端复刻任务**

### TASK001：UCI 前端复刻（详见 tasks/TASK001-replicate-uci-frontend.md）

### 本周计划（2026年1月8日 - 1月14日）

- [ ] 完成 Memory Bank 初始化
- [ ] 获取后端 API 文档
- [ ] 配置 Alova 实例
- [ ] 实现用户认证流程

### 本月计划（2026年1月）

- [ ] 完成用户认证系统
- [ ] 完成个人中心首页
- [ ] 完成优惠券列表和详情页
- [ ] 开始组合购券充值功能

### 下月计划（2026年2月）

- [ ] 完成组合购券充值功能
- [ ] 完成消费记录查询
- [ ] 完成推荐返佣系统
- [ ] 开始扩展功能开发

## 代码统计

### 当前代码量

（待统计工具配置后更新）

### 代码质量指标

（待静态分析工具配置后更新）

### 测试覆盖率

（待测试框架配置后更新）

## 团队协作

### 当前团队成员

（待补充）

### 职责分工

（待补充）

### 协作方式

（待补充）

## 参考资料

### 内部文档

- [项目简介](./projectbrief.md)
- [产品上下文](./productContext.md)
- [系统架构](./systemPatterns.md)
- [技术上下文](./techContext.md)
- [活跃上下文](./activeContext.md)

### 外部资源

- [Wot Starter 文档](https://wot-design-uni.netlify.app/guide/quick-start.html)
- [Wot UI 组件库](https://wot-design-uni.netlify.app/)
- [uni-app 官方文档](https://uniapp.dcloud.net.cn/)
- [Vue 3 文档](https://cn.vuejs.org/)
- [Alova 文档](https://alova.js.org/)
- [Pinia 文档](https://pinia.vuejs.org/zh/)

## 版本历史

### v1.0.0（计划中）

- 首个正式版本
- 包含所有核心功能
- 支持微信小程序、支付宝小程序、H5

### v1.1.0（规划中）

- 性能优化
- 用户体验提升
- Bug 修复

### v1.2.0（规划中）

- 新增营销活动功能
- 新增站点查询功能

**上午**：

- 项目初始化完成（基于 Wot Starter）
- 首次 Git 提交（commit: 7cd6208）
- 开发环境配置完成

**下午**：

- Memory Bank 完整建立
  - 核心文档编写：projectbrief.md, productContext.md, systemPatterns.md, techContext.md, activeContext.md, progress.md
  - 使用指南：README.md
  - 任务管理：tasks/_index.md
  - 知识管理：knowledge/_index.md
- 开发规范文档体系建立（.github/instructions/）
  - 8个规范文档覆盖项目开发各个方面
- Copilot 指令系统建立（.github/prompts/）
  - 6个指令文件支持 Memory Bank 管理和任务管理
- Copilot 工作指令配置（.github/copilot-instructions.md）
- 项目信息配置
  - 应用名称：URM Member
  - 微信小程序 AppID：wx6cc4bd9b379e98a6
  - 应用标识：__UNI__9853322
- 清理原模板文件
  - 删除 GitHub 配置文件（FUNDING、Issue/PR模板、CI/CD workflows
  - productContext.md
  - systemPatterns.md
  - techContext.md
  - activeContext.md
  - progress.md（本文档）
